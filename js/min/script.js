function create_pool(){var e=$("#letters-pool").val().replace(/(\r\n|\n|\r| )/gm,""),t=["a","i","e","o","u"];pool.all=e.split(""),pool.c=_.difference(pool.all,t),pool.v=_.difference(pool.all,pool.c)}function init(){create_pool(),add_letter(),add_letter(),add_letter(),spin_letters()}function log_word(){$("#all-words-wrap").slideUp(),word="",$("#letters .js-letter-control").each(function(){word+=$(this).find("h1.letter").text()}),""!=word&&words.push(word),console.log("The word is",word),shortlist=words.slice(Math.max(words.length-3,0)),$("#last-3-words").empty(),$.each(shortlist,function(e,t){$("#last-3-words").append("<li>"+t+"</li>")})}function check_domain(){api_key_data=$("#api-key").val(),domain_name_data=word+$("#domain").val(),$.ajax({type:"POST",dataType:"json",url:"check_api.php",data:{api_key:api_key_data,domain_name:domain_name_data}}).done(function(e){if("success"==e.status){var t=" is NOT ";e.available&&(t=" IS "),alert("The domain "+e.domain+t+"available.")}else alert("The API request failed, please check your key, please check your key or try again later.")}).fail(function(){alert("The API request failed, please check your key or try again later.")})}function spin_letters(){$(".js-letter-control").not(".held").each(function(){random_letter($(this))}),log_word()}function add_letter(){$(".js-letter-control:first").clone().removeClass("held").appendTo("#letters"),log_word()}function remove_letter(){$(".js-letter-control:last").remove(),log_word()}function manual_edit(e){var t=e.find(".letter-input"),o=e.find("h1");t.val(o.text()),e.addClass("manual"),t.focus().select(),t.blur(function(){set_letter(e,o,t)}),t.keyup(function(){set_letter(e,o,t)})}function set_letter(e,t,o){e.removeClass("manual"),t.text(o.val()),log_word()}function random_letter(e){var e,t=e.find(".letter"),o=e.find(".type option:selected").val(),l=pool[o],a=Math.floor(Math.random()*l.length);t.text(l[a])}var pool={all:null,pool_v:null,pool_c:null},words=[],shortlist=[],word="";$("#update-pool").click(function(){create_pool(),$("#pool-wrap").toggleClass("shown")}),$("#spin").click(function(){spin_letters()}),$("#add-letter").click(function(){add_letter()}),$("#api-key").change(function(){""!=$("#api-key").val()?$("body").addClass("key-activated"):$("body").removeClass("key-activated")}),$("#remove-letter").click(function(){remove_letter()}),$("#show-hide-pool").click(function(){$("#pool-wrap").toggleClass("shown")}),$("#letters").on("click",".hold",function(){$(this).closest(".js-letter-control").toggleClass("held")}),$("#letters").on("click",".nudge",function(){random_letter($(this).closest(".js-letter-control")),log_word()}),$("#letters").on("click","h1",function(){manual_edit($(this).closest(".js-letter-control"))}),$("#show-all").click(function(){$("#all-words").val(words.join("\n")),$("#all-words-wrap").slideDown()}),$("#check-domain").click(function(){check_domain()}),$(".popup-modal").magnificPopup({type:"inline",preloader:!1,focus:"#username",modal:!0}),$(document).on("click",".popup-modal-dismiss",function(e){e.preventDefault(),$.magnificPopup.close()}),init();